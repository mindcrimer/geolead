{%- extends 'reports/base.html' -%}

{%- block FORM -%}
  <form class="form" method="post" action="" autocomplete="off">
    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
    <fieldset class="uk-fieldset">

      <legend class="uk-legend uk-margin-bottom">{{ report_name|e }}</legend>

      <div class="form-controls">
        <div class="uk-margin">
          <label class="uk-form-label" for="report_from">С</label>
          <input class="uk-input date-input" name="dt_from" id="report_from"
                 value="{{ form.cleaned_data['dt_from']|date('d.m.Y') if form.cleaned_data and form.cleaned_data.get('dt_from') else '' }}">
          <div class="errors">{{ form.errors.get('dt_from', '') }}</div>
        </div>

        <div class="uk-margin">
          <label class="uk-form-label" for="report_to">По</label>
          <input class="uk-input date-input" name="dt_to" id="report_to"
                 value="{{ form.cleaned_data['dt_to']|date('d.m.Y') if form.cleaned_data and form.cleaned_data.get('dt_to') else '' }}">
          <div class="errors">{{ form.errors.get('dt_to', '') }}</div>
        </div>

        <div class="uk-margin">
          <label class="uk-form-label" for="unit">Объект</label>
          <select class="uk-select" name="unit" id="unit">
            <option value="">Все</option>
            {%- for unit in units -%}
              <option value="{{ unit['id'] }}"{% if form.cleaned_data and form.cleaned_data.get('unit') == unit['id'] %} selected="selected"{% endif %}>
                {{- unit['name'] -}}
              </option>
            {%- endfor -%}
          </select>
          <div class="errors">{{ form.errors.get('unit', '') }}</div>
        </div>

        <div class="uk-margin">
          <label class="uk-form-label" for="default_overstatements_standard">
            Норматив нахождения в геозоне, если не задано в таблице нормативов
          </label>
          <input class="uk-input" name="default_overstatements_standard"
                 id="default_overstatements_standard"
                 type="number" step="1" min="0" max="10000"
                 value="{{ form.cleaned_data.get('default_overstatements_standard', 3) }}">
          <div class="errors">{{ form.errors.get('default_overstatements_standard', '') }}</div>
        </div>

        <div class="uk-margin">
          <button class="uk-button uk-button-primary">Создать</button>
        </div>
      </div>

    </fieldset>
  </form>
{%- endblock -%}
